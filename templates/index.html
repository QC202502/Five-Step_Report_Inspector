{% extends "base.html" %}

{% block title %}äº”æ­¥æ³•ç ”æŠ¥æ£€æŸ¥å™¨{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row mb-4">
        <div class="col-md-12">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h4 class="mb-0">é»„ç‡•é“­äº”æ­¥åˆ†ææ³•ç ”æŠ¥è¯„ä¼°ç³»ç»Ÿ</h4>
                </div>
                <div class="card-body">
                    <p class="lead">æœ¬ç³»ç»ŸåŸºäºé»„ç‡•é“­çš„äº”æ­¥åˆ†ææ³•å¯¹ç ”ç©¶æŠ¥å‘Šè¿›è¡Œè¯„ä¼°ï¼Œäº”æ­¥åˆ†ææ³•åŒ…æ‹¬ï¼š</p>
                    <ol>
                        <li><strong>ä¿¡æ¯</strong> - æ”¶é›†å’Œæ•´ç†ç›¸å…³ä¿¡æ¯ï¼ŒåŒ…æ‹¬å…¬å¸å…¬å‘Šã€è¡Œä¸šæ•°æ®ã€æ”¿ç­–å˜åŒ–ç­‰</li>
                        <li><strong>é€»è¾‘</strong> - åŸºäºä¿¡æ¯è¿›è¡Œåˆ†ææ¨ç†ï¼Œå½¢æˆå¯¹å¸‚åœºæˆ–ä¸ªè‚¡çš„åŸºæœ¬åˆ¤æ–­</li>
                        <li><strong>è¶…é¢„æœŸ</strong> - å¯»æ‰¾å¸‚åœºå…±è¯†ä¹‹å¤–çš„ä¿¡æ¯ç‚¹ï¼Œå‘ç°è¢«ä½ä¼°æˆ–é«˜ä¼°çš„å› ç´ </li>
                        <li><strong>å‚¬åŒ–å‰‚</strong> - æ‰¾å‡ºèƒ½å¤Ÿä¿ƒä½¿ä»·æ ¼å˜åŠ¨çš„å…³é”®äº‹ä»¶æˆ–å› ç´ </li>
                        <li><strong>ç»“è®º</strong> - ç»™å‡ºæ˜ç¡®çš„æŠ•èµ„å»ºè®®ï¼ŒåŒ…æ‹¬è¯„çº§ã€ç›®æ ‡ä»·ç­‰</li>
                    </ol>
                    <div class="alert alert-info">
                        <strong>ğŸš€ Claudeå¢å¼ºåˆ†æ</strong>ï¼šæœ¬ç³»ç»ŸåŸºäºClaudeå¤§è¯­è¨€æ¨¡å‹çš„é«˜çº§è¯­ä¹‰åˆ†æèƒ½åŠ›ï¼Œæä¾›è¯¦ç»†ã€å…¨é¢çš„äº”æ­¥æ³•è¯„ä¼°ç»“æœï¼Œè¿œè¶…ç®€å•çš„å…³é”®è¯åŒ¹é…ã€‚
                    </div>
                    <div class="alert alert-success">
                        å·²åˆ†æ <strong>{{ reports|length }}</strong> ä»½ç ”æŠ¥ï¼Œç‚¹å‡»"å®æ—¶çˆ¬å–"æŒ‰é’®å¯è·å–å¹¶åˆ†ææœ€æ–°ç ”æŠ¥ã€‚
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- æœç´¢è¡¨å• -->
    <div class="row mb-4">
        <div class="col-md-8 offset-md-2">
            <form action="/search" method="get" class="d-flex">
                <input type="text" name="q" class="form-control" placeholder="è¾“å…¥å…³é”®è¯æœç´¢ç ”æŠ¥...">
                <button type="submit" class="btn btn-primary ms-2">æœç´¢</button>
            </form>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">ç ”æŠ¥åˆ—è¡¨</h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-striped table-hover">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>ç ”æŠ¥æ ‡é¢˜</th>
                                    <th>è¡Œä¸š</th>
                                    <th>è¯„çº§</th>
                                    <th>æœºæ„</th>
                                    <th>æ—¥æœŸ</th>
                                    <th>äº”æ­¥æ³•è¯„åˆ†</th>
                                    <th>æ“ä½œ</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for report in reports %}
                                <tr>
                                    <td>{{ loop.index }}</td>
                                    <td>{{ report.title }}</td>
                                    <td><a href="/industry/{{ report.industry }}">{{ report.industry }}</a></td>
                                    <td>
                                        {% if report.rating == 'ä¹°å…¥' or report.rating == 'å¼ºçƒˆæ¨è' %}
                                            <span class="badge bg-success">{{ report.rating }}</span>
                                        {% elif report.rating == 'å¢æŒ' or report.rating == 'æ¨è' %}
                                            <span class="badge bg-primary">{{ report.rating }}</span>
                                        {% elif report.rating == 'ä¸­æ€§' or report.rating == 'æŒæœ‰' %}
                                            <span class="badge bg-secondary">{{ report.rating }}</span>
                                        {% elif report.rating == 'å‡æŒ' or report.rating == 'å–å‡º' %}
                                            <span class="badge bg-danger">{{ report.rating }}</span>
                                        {% else %}
                                            <span class="badge bg-light text-dark">{{ report.rating }}</span>
                                        {% endif %}
                                    </td>
                                    <td>{{ report.org }}</td>
                                    <td>{{ report.date }}</td>
                                    <td>
                                        <div class="progress" style="height: 20px;">
                                            {% set score = report.analysis.summary.completeness_score %}
                                            {% if score >= 80 %}
                                                <div class="progress-bar bg-success" role="progressbar" style="width: {{ score }}%;">{{ score }}%</div>
                                            {% elif score >= 60 %}
                                                <div class="progress-bar bg-info" role="progressbar" style="width: {{ score }}%;">{{ score }}%</div>
                                            {% elif score >= 40 %}
                                                <div class="progress-bar bg-warning" role="progressbar" style="width: {{ score }}%;">{{ score }}%</div>
                                            {% else %}
                                                <div class="progress-bar bg-danger" role="progressbar" style="width: {{ score }}%;">{{ score }}%</div>
                                            {% endif %}
                                        </div>
                                    </td>
                                    <td>
                                        <a href="/report/{{ loop.index0 }}" class="btn btn-sm btn-primary">è¯¦æƒ…</a>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %} 